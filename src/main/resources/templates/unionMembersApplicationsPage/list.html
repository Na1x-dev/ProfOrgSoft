<div class="main-table" th:fragment="list" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="to-something-new-button">
        <dialog id="add-dialog" class="add-dialog dialog">
            <form th:fragment="new-application-form" class="new-application-container"
                  th:action="@{/unionMembersApplicationsPage/index/add}" method="post">
                <div class="some-text" th:text="'Новое заявление'">
                </div>
                <div class="new-application-inputs new-inputs">
                    <select name="unionMember" th:field="${newApplication.unionMember.unionMemberId}">
                        <option disabled value="">Выберите сотрудника</option>
                        <option th:each="unionMember : ${unionMembers}" th:value="${unionMember.unionMemberId}" th:utext="${unionMember.getIdAndName()}"></option>
                    </select>
                    <input type="date" class="new-application-input" placeholder="Дата заявления"
                           autofocus="true" required="required" th:field="${newApplication.registerDate}"/>
                    <select name="applicationType" th:field="${newApplication.applicationType.applicationTypeId}">
                        <option disabled value="">Выберите тип заявления</option>
                        <option th:each="applicationType : ${applicationTypes}" th:value="${applicationType.applicationTypeId}" th:utext="${applicationType.applicationTypeTitle}"></option>
                    </select>
                    <select name="materialPayment" th:field="${newApplication.materialPayment.materialPaymentId}">
                        <option disabled value="">Выберите размер оплаты</option>
                        <option th:each="materialPayment : ${materialPayments}" th:value="${materialPayment.materialPaymentId}" th:utext="${materialPayment.getAmountAndGround()}"></option>
                    </select>
                    <select name="meetingMinute" th:field="${newApplication.meetingMinute.meetingMinuteId}">
                        <option disabled value="">Выберите протокол заседания</option>
                        <option th:each="meetingMinute : ${meetingMinutes}" th:value="${meetingMinute.meetingMinuteId}" th:utext="${meetingMinute.meetingMinuteNumber}"></option>
                    </select>
                </div>
                <div class="bottom-new-application-buttons">
                    <button type="submit" class="confirm-add-new-application-button dialog-button">Добавить</button>
                    <button type="button" class="close-add-dialog dialog-button">Отмена</button>
                </div>
            </form>

        </dialog>
        <a class="new-application-add-button open-add-dialog open-dialog" th:onclick="
                            let divParent = this.closest('div');
                            let dialogCloseButton = divParent.querySelector('.new-application-container').querySelector('.bottom-new-application-buttons').querySelector('.close-add-dialog');
                            let addDialog = divParent.querySelector('#add-dialog');
                            addDialog.show();
                            dialogCloseButton.onclick = function(){
                            addDialog.close();}">Добавить заявление
        </a>
        <a onClick="javascript:CallPrint('.table');" title="Распечатать проект">Распечатать</a>
    </div>
    <table class="table">
        <thead>
        <tr>
            <th style="width: 5%">id заявления</th>
            <th style="width: 10%">Фамилия</th>
            <th style="width: 10%">Имя</th>
            <th style="width: 10%">Отчество</th>
            <th style="width: 10%">Дата регистрации</th>
            <th style="width: 10%">Тип заявления</th>
            <th style="width: 10%">Номер протокола</th>
            <th style="width: 10%">Сумма</th>
            <th style="width: 10%">Основание</th>

        </tr>
        </thead>
        <tbody>
        <tr th:each="i : ${#numbers.sequence(applications.size() - 1, 0, -1)}"
            th:with="applicat=${applications[i]}" class="table-row">

            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.applicationId}">
                </div>
            </td>
            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.unionMember.surname}">
                </div>
            </td>
            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.unionMember.name}">
                </div>
            </td>
            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.unionMember.patronymic}">
                </div>
            </td>
            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.getDateInNormalFormat()}">
                </div>
            </td>
            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.applicationType.applicationTypeTitle}">
                </div>
            </td>
            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.meetingMinute.meetingMinuteNumber}">
                </div>
            </td>
            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.materialPayment.paymentAmount}">
                </div>
            </td>
            <td style="text-align: center">
                <div class="table-cell" th:text="${applicat.materialPayment.groundsForFinPayment.groundText}">
                </div>
            </td>



            <td style="text-align: center" th:if="${checkUser.isAdmin()}">
                <div class="table-cell">
                    <dialog id="update-dialog" class="update-dialog dialog">
                        <form th:fragment="update-application-form" class="update-application-container"
                              th:action="@{'/unionMembersApplicationsPage/index/update/'+${applicat.applicationId}}" method="post">
                            <div class="some-text" th:text="'Изменение заявления'">
                            </div>
                            <div class="update-application-inputs update-inputs">
                                <select th:value="${applicat.unionMember.unionMemberId}" name="unionMember.unionMemberId">
                                    <option disabled value="">Выберите сотрудника</option>
                                    <option th:each="unionMember : ${unionMembers}" th:value="${unionMember.unionMemberId}" th:utext="${unionMember.getIdAndName()}"></option>
                                </select>
                                <input type="date" class="update-application-input" placeholder="Дата заявления"
                                       autofocus="true" required="required" th:value="${applicat.registerDate}" name="registerDate"/>
                                <select th:value="${applicat.applicationType.applicationTypeId}" name="applicationType.applicationTypeId">
                                    <option disabled value="">Выберите тип заявления</option>
                                    <option th:each="applicationType : ${applicationTypes}" th:value="${applicationType.applicationTypeId}" th:utext="${applicationType.applicationTypeTitle}"></option>
                                </select>
                                <select th:value="${applicat.materialPayment.materialPaymentId}" name="materialPayment.materialPaymentId">
                                    <option disabled value="">Выберите размер оплаты</option>
                                    <option th:each="materialPayment : ${materialPayments}" th:value="${materialPayment.materialPaymentId}" th:utext="${materialPayment.getAmountAndGround()}"></option>
                                </select>
                                <select th:value="${applicat.meetingMinute.meetingMinuteId}" name="meetingMinute.meetingMinuteId">
                                    <option disabled value="">Выберите протокол заседания</option>
                                    <option th:each="meetingMinute : ${meetingMinutes}" th:value="${meetingMinute.meetingMinuteId}" th:utext="${meetingMinute.meetingMinuteNumber}"></option>
                                </select>
                            </div>
                            <div class="bottom-update-application-buttons">
                                <button type="submit" class="confirm-update-application-button dialog-button">Изменить
                                </button>
                                <button type="button" class="close-update-dialog dialog-button">Отмена</button>
                            </div>
                        </form>

                    </dialog>
                    <a class="application-update-button open-update-dialog open-dialog" th:onclick="
                                let tdParent = this.closest('td');
                                let dialogCloseButton = tdParent.querySelector('.update-application-container').querySelector('.bottom-update-application-buttons').querySelector('.close-update-dialog');
                                let updateDialog = tdParent.querySelector('#update-dialog');
                                updateDialog.show();
                                dialogCloseButton.onclick = function(){
                                updateDialog.close();}">Изменить
                    </a>
                </div>
            </td>

            <td style="text-align: center" th:if="${checkUser.isAdmin()}">
                <div class="table-cell">
                    <dialog id="delete-dialog" class="delete-dialog dialog">
                        <div class="some-text"
                             th:text="'Вы действительно хотите удалить тип заявления с id ' + ${applicat.applicationId} + '?'">
                            Удаление
                        </div>
                        <a class="dialog-button" id="confirm-delete-application-button"
                           th:href="@{'/unionMembersApplicationsPage/index/delete/'+${applicat.applicationId}}">Да</a>
                        <button id="close-delete-dialog-button" class="dialog-button" autofocus>Нет</button>
                    </dialog>
                    <!--                th:href="@{'/userPage/index/delete/id='+${user.userId}}"-->
                    <a class="application-delete-button open-delete-dialog open-dialog" th:onclick="
                                    let tdParent = this.closest('td');
                                    let deleteDialog = tdParent.querySelector('#delete-dialog');
                                    deleteDialog.show();
                                    tdParent.querySelector('#close-delete-dialog-button').onclick = function(){
                                    deleteDialog.close();}">Удалить
                    </a>
                </div>
            </td>
            <!--            <td style="text-align: center" th:if="${checkUser.isAdmin()}">-->
            <!--                <dialog id="update-dialog" class="update-dialog dialog">-->
            <!--                    <form th:fragment="unionMember-form" class="unionMember-container"-->
            <!--                          th:action="@{'/mainPage/index/update/'+${unionMember.bookId}}" method="post">-->
            <!--                        <div class="some-text" th:text="'Изменение данных книги ' + ${unionMember.title}">-->
            <!--                            Изменение-->
            <!--                        </div>-->
            <!--                        <div class="unionMember-inputs" >-->
            <!--                            <input type="text" class="phoneNumber-input unionMember-input" placeholder="Название книги"-->
            <!--                                   autofocus required="required" th:value="${unionMember.title}" th:name="title"/>-->
            <!--                            <input type="text" class="phoneNumber-input unionMember-input" placeholder="Автор"-->
            <!--                                   autofocus required="required" th:value="${unionMember.position.authorName}" th:name="position.authorName"/>-->
            <!--                            <input type="text" class="phoneNumber-input unionMember-input" placeholder="Издательство"-->
            <!--                                   autofocus required="required"-->
            <!--                                   th:name="materialPayment.publisherTitle" th:value="${unionMember.materialPayment.publisherTitle}"/>-->
            <!--                            <input type="text" class="phoneNumber-input unionMember-input" placeholder="Жанр"-->
            <!--                                   autofocus required="required" th:value="${unionMember.genre.genreName}" th:name="genre.genreName"/>-->
            <!--                            <input type="text" value="loh" class="phoneNumber-input unionMember-input" placeholder="Язык"-->
            <!--                                   autofocus required="required" th:value="${unionMember.groundsForFinPayment.languageName}" th:name="groundsForFinPayment.languageName"/>-->
            <!--                        </div>-->
            <!--                        &lt;!&ndash;                        <input type="text" name="username" class="user-input" placeholder="Имя пользователя"&ndash;&gt;-->
            <!--                        &lt;!&ndash;                               autofocus="true" required="required" th:value="${user.username}" th:field="${updateUser.username}"/>&ndash;&gt;-->
            <!--                        &lt;!&ndash;                        <input type="text" name="password" class="user-input" placeholder="Пароль"&ndash;&gt;-->
            <!--                        &lt;!&ndash;                               autofocus="true" required="required" th:field="${updateUser.password}"/>&ndash;&gt;-->
            <!--                        <div class="bottom-unionMember-buttons">-->
            <!--                            <button type="submit" class="confirm-update-unionMember-button dialog-button">Изменить</button>-->
            <!--                            <button type="button" class="close-update-dialog dialog-button">Отмена</button>-->
            <!--                        </div>-->
            <!--                    </form>-->
            <!--                    &lt;!&ndash;        <span class="has-error" th:if="${#fields.hasErrors('username')}" th:errors="*{username}">some error error error error error</span>&ndash;&gt;-->
            <!--                    &lt;!&ndash;        <span class="has-error" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">some error error error error error</span>&ndash;&gt;-->
            <!--                </dialog>-->
            <!--                <a class="unionMember-update-button open-update-dialog open-dialog" th:onclick="-->
            <!--                    let tdParent = this.closest('td');-->
            <!--                    let dialogCloseButton = tdParent.querySelector('.unionMember-container').querySelector('.bottom-unionMember-buttons').querySelector('.close-update-dialog');-->
            <!--                    let updateDialog = tdParent.querySelector('#update-dialog');-->
            <!--                    updateDialog.show();-->
            <!--                    dialogCloseButton.onclick = function(){-->
            <!--                    updateDialog.close();}">Изменить-->
            <!--                </a>-->
            <!--            </td>-->

            <!--            <td style="text-align: center" class="delete-button-td" th:if="${checkUser.isAdmin()}">-->
            <!--                <dialog id="delete-dialog" class="delete-dialog dialog">-->
            <!--                    <div class="some-text" th:text="'Вы действительно хотите удалить книгу ' + ${unionMember.title} + '?'">-->
            <!--                        Удаление-->
            <!--                    </div>-->
            <!--                    <a class="dialog-button" id="confirm-delete-unionMember-button"-->
            <!--                       th:href="@{'/mainPage/index/delete/'+${unionMember.bookId}}">Да</a>-->
            <!--                    <button id="close-delete-dialog-button" class="dialog-button" autofocus>Нет</button>-->
            <!--                </dialog>-->
            <!--                &lt;!&ndash;                th:href="@{'/userPage/index/delete/id='+${user.userId}}"&ndash;&gt;-->
            <!--                <a class="unionMember-delete-button open-delete-dialog open-dialog" th:onclick="-->
            <!--                    let tdParent = this.closest('td');-->
            <!--                    let deleteDialog = tdParent.querySelector('#delete-dialog');-->
            <!--                    deleteDialog.show();-->
            <!--                    tdParent.querySelector('#close-delete-dialog-button').onclick = function(){-->
            <!--                    deleteDialog.close();}">Удалить-->
            <!--                </a>-->
            <!--            </td>-->
        </tr>
        </tbody>
    </table>
</div>
